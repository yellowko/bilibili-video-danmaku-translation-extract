# B站视频同传弹幕提取
用于提取B站视频中的同传弹幕，主要针对有标准格式同传弹幕（下称字幕）的VTB的直播回放。
参考了[Bilibili Live Danmaku Filter](https://greasyfork.org/en/scripts/386759-bilibili-live-danmaku-filter)的部分代码。

# 安装
本脚本运行基于油猴脚本，需要先安装[油猴脚本](https://www.tampermonkey.net/)。

之后再安装本脚本[点此安装](https://github.com/yellowko/bilibili-video-danmaku-translation-extract/raw/master/B%E7%AB%99%E8%A7%86%E9%A2%91%E5%90%8C%E4%BC%A0%E5%BC%B9%E5%B9%95%E6%8F%90%E5%8F%96.user.js)

## 使用方法
打开一个B站视频，**如果匹配到**，会在视频里出现一个有字幕的框，里面的字幕会随视频进度更新。只有当视频时间到达字幕时间戳的位置时才会自动滚动，检测频率一秒一次。如果发现长时间没有自动滚动，请不要惊慌，有可能是这段时间里没有到达字幕的触发点。

## 可以的操作
目前暂时提供了四种操作：    
> *滚动*：在面板内使用鼠标条滚轮可以查看字幕。  
> *左键双击*：双击某条字幕可以设置本字幕为当前时间同传翻译，延迟参数会自动计算。    
> *右键单击*：在面板上单击右键会跳转到当前时间对应的字幕。  
> *拖拽*：字幕的面板可以任意拖动。  

## 参数设置
目前只提供字幕延迟参数供设置：  
> *延迟*：在**视频开始播放后**在视频时长右边会出现一个输入框，里面可以设置与主播说话的延迟，单位为ms，实时生效。经过测试在9000左右有较好的效果，有需要可以自己调整。设置为0时，本脚本会停止运行。   

## 已知问题
1. 仅在Win10、Chrome环境下做了基本测试，其他环境没测，也暂未对移动端做适配，不知道会出现什么问题。  
2. 没有做什么太多测试和优化，有可能会出现奇怪的问题。   
3. 暂未提供参数的保存功能，目前感觉意义不大。   